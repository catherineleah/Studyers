$("#wiki-submit").live("click",function(a){var b=$("#wiki-term-input").val();if(!b){$(this).after('<span class="empty-notice label warning">Please add a term to search on Wikipedia</span>'),setTimeout(function(){$(".empty-notice").fadeOut("slow")},3e3);return}a.preventDefault(),$(".pull-resource").hide(),$("#wiki-finder-results").addClass("loading"),$("#wiki-finder-results p, #wiki-finder-results a.wiki-read-more").remove(),$("#side-resources").show("slide",{direction:"right"}),$("#wiki-results").show("slide",{direction:"right"}),$("#text-editor").addClass("minified"),modifyCanvasAndImageWidth();var b=$("#wiki-term-input").val();if(!b){$("#wiki-finder-results").append("Please add a term to search on Wikipedia");return}var c=!1;$.ajax({url:"http://en.wikipedia.org/w/api.php",data:{action:"opensearch",search:b,format:"json"},dataType:"jsonp",success:function(a,c,d){if(a[1].length==0)return $("#wiki-finder-results").removeClass("loading").append("Sorry, I can't find that term on Wikipedia.");b=b.replace(" ","_"),$.ajax({url:"http://en.wikipedia.org/w/api.php",data:{action:"parse",prop:"text",page:b,format:"json"},dataType:"jsonp",success:function(a){wikipage=$("<div>"+a.parse.text["*"]+"<div>").children("p:first"),wikipage.addClass("wiki-content"),wikipage.find("sup").remove(),wikipage.find("a").each(function(){$(this).attr("href","http://en.wikipedia.org"+$(this).attr("href")).attr("target","wikipedia")}),$("#wiki-finder-results").removeClass("loading"),$("#wiki-finder-results").append(wikipage),$("#wiki-finder-results").append('<a class="wiki-read-more" href="http://en.wikipedia.org/wiki/'+b+'" target="wikipedia"">Read more on Wikipedia</a>'),$("#wiki-finder-results").append('<p><a href="#" class="btn" id="copy-wiki">Copy to the lesson</a></p>')}})}})}),$("#copy-wiki").live("click",function(a){a.preventDefault();var b=$(this).parent().parent().find(".wiki-content"),c=$(this).parent().parent().find(".wiki-read-more"),d=new TextEditor;d.showControls(),d.savedText(b),d.savedText(c),$(this).remove(),$("#side-resources").hide("slide",{direction:"right"}),$("#text-editor").removeClass("minified"),modifyCanvasAndImageWidth()})